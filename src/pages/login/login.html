<!--
  Generated template for the Login page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar text-center>
    <ion-title><img src="assets/img/logofooter2.png" height="80px"></ion-title>
  </ion-navbar>


  <ion-toolbar>

    <ion-segment [(ngModel)]="logReg">
      <ion-segment-button value="login">
        Login
      </ion-segment-button>
      <ion-segment-button value="registro">
        Registro
      </ion-segment-button>
    </ion-segment>

  </ion-toolbar>
</ion-header>


<ion-content padding>

  <div [ngSwitch]="logReg">
    <ion-list *ngSwitchCase="'login'">
      <form [formGroup]="Login" (ngSubmit)="logForm()">
        <ion-item>
          <ion-label floating>Usuario</ion-label>
          <ion-input type="text" formControlName="user"></ion-input>
        </ion-item>
        <ion-item no-lines *ngIf="Login.controls.user.errors && (Login.controls.user.dirty || Login.controls.user.touched)" class="alert alert-danger">
            <div ion-text color="danger" [hidden]="!Login.controls.user.errors.required">
              El nombre es obligatorio
            </div>
          </ion-item>
        <ion-item>
          <ion-label floating>Password</ion-label>
          <ion-input #passInput type="password" formControlName="pass"></ion-input>
          <ion-icon [name]="ojo"  (click)="showPassword(passInput)" item-right class="show-password"></ion-icon>
        </ion-item>
        <ion-item no-lines *ngIf="Login.controls.pass.errors && (Login.controls.pass.dirty || Login.controls.pass.touched)" class="alert alert-danger">
            <div ion-text color="danger" [hidden]="!Login.controls.pass.errors.required">
              La contraseña es obligatoria
            </div>
          </ion-item>
        <ion-item padding>
          <ion-label> Recordar</ion-label>
          <ion-toggle formControlName="remember"></ion-toggle>
        </ion-item>
        <div padding>
          <button ion-button [disabled]="!Login.valid" color="primary" block large>Login</button>
        </div>
      </form>
      <ion-item no-lines>
        Has olvidado la contraseña. <a href="http://www.lagaleramagazine.es/wp-login.php?action=lostpassword" target="_blank">Pulsa aqui</a>
      </ion-item>
      <!--<ion-item [innerHTML]="lostPassword | safe: 'html'">
        </ion-item>-->
    </ion-list>

    <ion-list *ngSwitchCase="'registro'">
      <form [formGroup]="Register" (ngSubmit)="registerForm()">
        <ion-item>
          <ion-label floating>Usuario</ion-label>
          <ion-input type="text" formControlName="user"></ion-input>
        </ion-item>
        <ion-item no-lines *ngIf="Register.controls.user.errors && (Register.controls.user.dirty || Register.controls.user.touched)" class="alert alert-danger">
            <div ion-text color="danger" [hidden]="!Register.controls.user.errors.required">
              El nombre es obligatorio
            </div>
          </ion-item>
        <ion-item>
          <ion-label floating>Correo Electrónico</ion-label>
          <ion-input type="text" formControlName="mail"></ion-input>
        </ion-item>
         <ion-item no-lines *ngIf="Register.controls.mail.errors && (Register.controls.mail.dirty || Register.controls.mail.touched)" class="alert alert-danger">
            <div ion-text color="danger" [hidden]="!Register.controls.mail.errors.required">
              El correo electrónico es obligatorio
            </div>
            <div ion-text color="danger" [hidden]="!Register.controls.mail.errors.invalidEmail">
              El correo electrónico no es valido
            </div>
          </ion-item>
        <ion-item>
          <ion-label floating>Contraseña</ion-label>
          <ion-input type="password" formControlName="pass" show-password></ion-input>
        </ion-item>
        <ion-item>
          <ion-label floating>Confirma Contraseña</ion-label>
          <ion-input type="password" formControlName="matchPassword" (change)="check(Register.hasError('mismatchedPasswords'))"></ion-input>
        </ion-item>
        <ion-item no-lines *ngIf="Register.controls.matchPassword.touched && Register.hasError('mismatchedPasswords') && Register.controls.pass.valid" class="alert alert-danger">
            <div ion-text color="danger" [hidden]="!Register.hasError('mismatchedPasswords')">
              Las contraseñas deben coincidir
            </div>
          </ion-item>

        <div padding>
          <button ion-button [disabled]="!Register.valid" color="primary" block large>Registro</button>
        </div>

      </form>
    </ion-list>

  </div>

</ion-content>
